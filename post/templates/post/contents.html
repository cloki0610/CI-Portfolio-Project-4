{% extends "base.html" %}
{% load static %}
{% load cloudinary %}
{% block content %}
<div class="container-fluid">
    <!--Header-->
    <h1>{{ view.get_theme.title }}</h1>
    <h2>{{ view.get_theme.author }}</h2>
    <!--button to back overview page-->
    <div class="row">
        <a href="{% url 'theme_overview' view.get_theme.slug %}" class="btn btn-outline-dark btn-block btn-lg w-100">Back to Overview</a>
    </div>
    <!--list of posts-->
    {% for post in post_list%}
    <div class="row">
        <p>{{ post.title }}</p>
        <p>{{ post.excerpt }}</p>
        {% if user.is_authenticated %}
        {% if request.user == post.theme.author %}
        <a href="{% url 'edit_post' post.theme.slug post.id %}">Edit post</a>
        <form action="{% url 'delete_post' post.theme.slug post.id %}" method="POST">
            {% csrf_token %}
            <button type="submit">Delete post</button>
        </form>
        {% endif %}
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endblock %}